<nav class="navbar navbar-expand-lg bg-light navbar-light" style="height:30px">
<!-- Links -->
  <ul class="navbar-nav ml-auto">
    <li>
      <a class="nav-link" href="#"><i class="fas fa-shopping-cart"></i>
            <div class="showdetailcart"  >
           
            </div>
      </a>
    </li>
    <li>
      <a class="nav-link" href="#">Sign up</a>
    </li>
    <span class="navbar-text">
    /
    </span>
    <li>
      <a class="nav-link" href="#">Sign in</a>
    </li>
  </ul>
  <!-- Navbar text-->
  
</nav>

<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <div class="container">
    <%= link_to 'N-AIR SHOP', root_path, class: "navbar-brand" %>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav m-auto">
        <li class="nav-item mr-3 active">
          <%= link_to 'Home', root_path, class: "nav-link" %>
        </li>
        <li class="nav-item dropdown mr-3">
        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Shop
        </a>
        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
          <% Category.all.each do |cat| %>
            <%= link_to cat.name, category_path(cat), class:"dropdown-item" %>
          <% end %>
        </div>
      </li>
        <li class="nav-item mr-3">
          <a class="nav-link" href="#">About</a>
        </li>
        <li class="nav-item mr-3">
          <a class="nav-link" href="#">Contact</a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<% if session[:cart_id] != nil %>
<script type="text/javascript">
     var flag = false;
  $(".fa-shopping-cart").hover(function(){
       if (!flag){
       flag = true;
       var table = $('<table>').addClass('foo');
        "<% Cart.find(session[:cart_id]).cart_products.each do |item| %>"
            var row = $('<tr>').append("<td><img src=<%=url_for(Product.find(item['product_id']).images.first)%> class='cartnavdropdow' ></td> <td><%= Product.find(item['product_id']).name %></td><td><%= item['size'] %></td><td><%= item['quantity'] %></td>");
            table.append(row);
        "<% end %>"
      $('.showdetailcart').append(table);
       $('.showdetailcart').css("display", "block");
      }
      else{
        $('.showdetailcart').css("display", "block");
      }
});




  $(".showdetailcart").hover(function(){
    $('.showdetailcart').css("display", "block");
  });
  $(".showdetailcart").mouseout(function(){
    $('.showdetailcart').css("display", "none");
  });
 $(".showdetailcart").mouseover(function(){
 $('.showdetailcart').css("display", "block");
});


</script>
<% end %>