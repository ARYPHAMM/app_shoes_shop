<div class="row">
      <h2 align="center" >Related products</h2>
  <div class='Related_products' >
    <div class='scrollbar-Related'>
<!--              products.instance_of? Array  %>
 -->
      <% products.take(4).each do |product|%>
      <div class="card ml-4 related_item" >

         <%= image_tag((Product.find(product['id'].to_i).images[0]), alt: "Product", class: "card-img-top" ) %>
        <a href="#" class="show_detail">View Detail</a>
        <div class="card-body">
          <p class="card-text d-inline product-name"><strong>product name</strong></p>
          <p class="card-text d-inline product-price"><strong>$product price</strong></p>
        </div>
      </div>
      <% end %>
      <div id="more_related_products" style=" padding: 100px 0px;">
        <button id='loadrelated' class="btn btn-info ml-3">More</button>
      </div>
    </div >
  </div>
</div>
<script type="text/javascript">
var count_related = 1;
$( "#loadrelated" ).click(function() {
count_related = count_related + 4;
var product_id = "<%= @product.id %>";
$.ajax({
url: "/products/watched_more_related_products",
type: "post",
dataType: "script",
data: { info: { "offset": count_related,"product_id": product_id }}
});
});
</script>